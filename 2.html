<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
  </head>

  <body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1200px;height:600px;"></div>
    <script type="text/javascript">
      // 基于准备好的dom，初始化echarts实例
      var myChart = echarts.init(document.getElementById("main"));
      data = {
        name: "余杭区: 50675",
        children: [
          {
            id: 102,
            name: "高端制造:4631",
            children: [
              {
                id: 10202,
                name: "货摊纺织、服装及鞋零售:351"
              },
              {
                id: 10201,
                name: "技能培训、教育辅助及其他教育:1878"
              }
            ]
          },
          {
            id: 106,
            name: "金融服务:1559",
            children: [
              {
                id: 10602,
                name: "控股公司服务:27"
              },
              {
                id: 10601,
                name: "投资与资产管理:1513"
              }
            ]
          },
          {
            id: 107,
            name: "生物健康:1435",
            children: [
              {
                id: 10701,
                name: "医学研究和试验发展:353"
              },
              {
                id: 10702,
                name: "生物技术推广服务:337"
              }
            ]
          },
          {
            id: 103,
            name: "时尚行业:5057",
            children: [
              {
                id: 10302,
                name: "服装零售:1758"
              },
              {
                id: 10301,
                name: "服装批发:2805"
              }
            ]
          }
        ]
      };
      /*       console.log(data) */

      option = {
        series: [
          {
            type: "tree",
            name: "tree2",
            data: [data],
            top: "10%",
            bottom: "10%",
            right: "25%",
            left: "7%",
            symbolSize: 8,
            symbol: "circle",
            // 展开发的层级数
            initialTreeDepth: 10,
            itemStyle: {
              color: "#9D85FB",
              borderColor: "#9D85FB"
            },
            label: {
              normal: {
                position: "top",
                verticalAlign: "middle",
                align: "center",
                fontSize: 9,
                distance: -30,
                padding: [10, 0, 5, 0],
                formatter: function(dat) {
                  console.log(dat.name);
                  var num = dat.name.replace(/[^0-9]/gi, "");
                  var reg = /[\u4e00-\u9fa5]/g;
                  var names = dat.name.match(reg);
                  hz = names.join(""); /* return num */ //4500
                  /*  alert(hz)
                                   alert(num); */ var arr = [
                    "{gray|" + hz + "}",
                    /*    '{hr|}', */
                    "{green|$ " + num + "}"
                  ];

                  return arr.join("\n");
                },

                rich: {
                  gray: {
                    color: "red",
                    fontSize: 12,
                    padding: [10, 0, 5, 0]
                  },
                  green: {
                    color: "green"
                  }
                }
              }
            },
            // 线的样式
            lineStyle: {
              color: "#9D85FB",
              curveness: "0.5"
            },
            leaves: {
              label: {
                normal: {
                  // 叶子节点字的样式
                  /*  position: 'left',
                                  verticalAlign: 'top',
                                  align: 'left', */
                  position: "right",
                  verticalAlign: "middle",
                  align: "left",
                  fontSize: 9,
                  distance: 10
                }
              }
            },
            expandAndCollapse: true,
            animationDuration: 550,
            animationDurationUpdate: 750
          }
        ]
      };
      // 使用刚指定的配置项和数据显示图表。
      myChart.setOption(option);
    </script>
  </body>
</html>
